<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>Building a GUI Application for the Password Generator</title>
    <meta name="description" content="In the previous blog post, we built a password generator and packaged it as a command line utility, in this blog post we'll look at how to build a GUI application with the same functionality and look at some of the techniques of building GUI applications ...">
    <meta name="author"      content="Alex Harsányi">
    <meta name="keywords"    content="racket">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="/img/favicon.svg">
    <link rel="canonical" href="https://alex-hhh.github.io/2019/03/password-generator-gui.html">
    <link rel="next" href="/2019/03/password-generator.html">
    <link rel="prev" href="/2019/04/build-racket-packages-with-azure-pipelines.html">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/pygments.css">
    <link rel="stylesheet" type="text/css" href="/css/scribble.css">
    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed|Roboto+Mono&display=swap" rel="stylesheet">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml"
          href="/feeds/all.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml"
          href="/feeds/all.rss.xml" title="RSS Feed">
    <!-- JS -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-110325732-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
      <div class="container">
        <a href="/index.html" class="navbar-brand">Alex Harsányi</a>

        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                data-target="#navbar_collapse" aria-controls="navbar_collapse"
                aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbar_collapse">
          <ul class="navbar-nav mr-auto">

            <li class="nav-item dropdown">
              <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
                Tags <b class="caret"></b></a>
              <ul class="dropdown-menu" role="menu" id="tags-menu-content">
                <!-- will be filled in dynamically by custom.js -->
              </ul>
            </li>
            <li>
              <a class="nav-link" href="/About.html">About</a>
            </li> 
            <li>
              <a class="nav-link" href="/tags/arduino.html">Arduino</a>
            </li> 
            <li>
              <a class="nav-link" href="/tags/racket.html">Racket</a>
            </li> 
            <li>
              <a class="nav-link" href="/tags/activitylog2.html">ActivityLog2</a>
            </li> 
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="row">

        <!-- Main column -->
        <!-- NOTE: there is a bug in the web server template renderer which
             indents all items inside if blocks.  This means that we cannot
             put the contents inside an if block, as all the <pre> tags will
             be indented.
          -->
        <div id="content" class=col-md-9>





          <article>
  <header>
    <h1>Building a GUI Application for the Password Generator</h1>
    <p class='date-and-tags'>
<time datetime="2019-03-23" pubdate="true">2019-03-23</time> :: <span class="tags"><a href="/tags/racket.html">racket</a></span></p>
  </header>

<p>In the <a href="/2019/03/password-generator.html">previous blog post</a>, we built a password generator and packaged it as a command line utility, in this blog post we&rsquo;ll look at how to build a GUI application with the same functionality and look at some of the techniques of building GUI applications in Racket.</p>
<!-- more-->

<p>If you only need to generate passwords once in a while, you might forget the options for the password generator and the first command when using it would always be <code>raco pwgen --help</code> to remind you of the options. If this is the case, a GUI application might be a better option since it can present the user choices directly, and, more importantly, it can remember its settings automatically. For example, if you prefer to always generate lower case passwords with 128 bit strength and grouping the letters, the password application can remember the settings and always start up with the last selection:</p>

<div class="figure"><img src="/img/a024/pwgen.png" alt="" />
 <p class="caption"></p></div>

<p>The process of generating the passwords was explained in the <a href="/2019/03/password-generator.html">previous blog post</a> and will not be repeated here. You may wish to have a look at that post to understand the password generation mechanism and options, as this blog post will only discuss the GUI aspects of the application.</p>

<h2 id="building-a-gui-in-the-repl">Building a GUI in the REPL</h2>

<p>You can build GUI applications interactively from DrRacket by starting with an empty <code>#lang racket/gui</code> file, evaluating it to change the REPL language to <code>racket/gui</code>, than start typing your application in the REPL. For example, we can create the application window using:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">toplevel</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">frame%</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Password Generator"</span><span class="p">]</span> <span class="p">[</span><span class="n">width</span> <span class="mi">300</span><span class="p">]</span> <span class="p">[</span><span class="n">height</span> <span class="mi">200</span><span class="p">]))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The window is now created and ready, but not yet visible, we can show it by sending it the <code>show</code> message:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">toplevel</span> <span class="n">show</span> <span class="no">#t</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>We can now add the settings, password and bottom panels, and notice how the window contents is updated:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">settings-panel</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">group-box-panel%</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Options"</span><span class="p">]</span> <span class="p">[</span><span class="n">parent</span> <span class="n">toplevel</span><span class="p">]))</span>
<span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">password-panel</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">group-box-panel%</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Password"</span><span class="p">]</span> <span class="p">[</span><span class="n">parent</span> <span class="n">toplevel</span><span class="p">]))</span>
<span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">bottom-pane</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">horizontal-pane%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">toplevel</span><span class="p">]))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>This can be followed by adding the &ldquo;Alphabet&rdquo; and &ldquo;Strength&rdquo; choices and the &ldquo;Group Letters&rdquo; check-box:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">alphabet</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">choice%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">settings-panel</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Alphabet "</span><span class="p">]</span>
    <span class="p">[</span><span class="n">choices</span> <span class="o">'</span><span class="p">(</span><span class="s2">"Full"</span> <span class="s2">"Normal"</span> <span class="s2">"Lower Case"</span> <span class="s2">"Simplified"</span><span class="p">)]))</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">bit-count</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">choice%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">settings-panel</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Strength "</span><span class="p">]</span>
    <span class="p">[</span><span class="n">choices</span> <span class="o">'</span><span class="p">(</span><span class="s2">"64 bits"</span> <span class="s2">"96 bits"</span> <span class="s2">"128 bits"</span> <span class="s2">"256 bits"</span> <span class="s2">"512 bits"</span> <span class="s2">"1024 bits"</span><span class="p">)]))</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">group</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">check-box%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">settings-panel</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Group letters"</span><span class="p">]))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>At this point, we might not like the vertical arrangement for these controls, so we can instruct the settings panel to change its layout to horizontal mode:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3e))" style="color: inherit">&gt;</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">settings-panel</span> <span class="n">set-orientation</span> <span class="no">#t</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>We can continue adding the other controls than hook up the functionality to build the application step-by-step. This is an interactive process which you can see below, and if you haven&rsquo;t written a GUI application in Racket before, it might be useful to try it out. Of course, this way of writing the application does not scale well beyond trivial programs, not to mention you have to type the entire application every time you start DrRacket. It is be more productive to start writing the application code in a file, but it is worth keeping in mind that you can write some GUI code, evaluate it in DrRacket, than start experimenting inside the REPL &mdash; this is the same interactive program development that one can use for non-GUI programs.</p>

<div id="myCarousel" class="carousel slide" data-ride="carousel"><!-- Indicators--> 
 <ol class="carousel-indicators">
  <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
  <li data-target="#myCarousel" data-slide-to="1"></li>
  <li data-target="#myCarousel" data-slide-to="2"></li>
  <li data-target="#myCarousel" data-slide-to="3"></li></ol> <!-- Wrapper for slides--> 
 <div class="carousel-inner">
  <div class="carousel-item active"><img class="rounded" src="/img/a024/t1.png" alt="Creating the frame" /></div> 
  <div class="carousel-item"><img class="rounded" src="/img/a024/t2.png" alt="Panels Added" /></div> 
  <div class="carousel-item"><img class="rounded" src="/img/a024/t3.png" alt="Alphabet and Strength buttons" /></div> 
  <div class="carousel-item"><img class="rounded" src="/img/a024/t4.png" alt="Horizontal Layout" /></div></div> <!-- Left and right controls--> <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span> <span class="sr-only">Previous</span></a> <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="sr-only">Next</span></a></div>

<h2 id="racket-gui-basics">Racket GUI Basics</h2>

<p>In the previous section, we used some Racket classes which correspond to GUI elements: <code>frame%</code>, <code>group-box-panel%</code>, <code>horizontal-pane%</code>, <code>choice%</code> and <code>check-box%</code>, and it is not too difficult to figure out what is going on just by reading the code, but if you are new to the GUI library, it might be worth clarifying a few things.</p>

<p>There&rsquo;s a Racket class for each GUI element and these classes can be grouped in three categories:</p>

<ul>
 <li><strong>toplevel windows</strong> represent windows that the operating system manages. A  GUI application needs at least one such window and all other GUI elements  are contained in such an object. In our application we will use a  <code>frame%</code> for the toplevel window, but there is also a  <code>dialog%</code> class for creating dialog boxes.</li>
 <li><strong>containers</strong> are GUI elements which group other GUI elements in certain  arrangements. Most containers are not visible directly, but the  <code>group-box-panel%</code> used in the example above is an exception, it  displays a label and a frame around the GUI elements it contains. Examples  of containers are <code>horizontal-pane%</code> and <code>vertical-pane%</code>,  which define their own layout. For custom layout, the developer will need  to define their own containers, by extending <code>panel%</code> or  <code>pane%</code>. The toplevel windows, such as <code>frame%</code>, are also  containers and multiple GUI elements can be added to them directly.</li>
 <li><strong>controls</strong> are GUI elements which present information to the user or allow  used input: <code>text-field%</code>, <code>choice%</code> and <code>button%</code>  are examples of such gui elements.</li></ul>

<p>GUI elements in Racket form a <strong>parent-child hierarchy</strong> with the toplevel window being at the top. This is reflected in the <code>parent</code> init field that must be specified for every GUI control as it is created. This hierarchy helps control the layout of the controls in the window. Here is the GUI control hierarchy for the Password Generator application:</p>

<div class="figure"><img src="/img/a024/hierarchy.svg" alt="" />
 <p class="caption"></p></div>

<p><strong>Layout control</strong> for the controls in a window is achieved through the use of container objects, for example, the <code>toplevel</code> frame% object will place all its children vertically, top to bottom, these children being the <code>settings-panel</code>, <code>password-panel</code> and the <code>bottom-pane</code>, these in turn place their own children horizontally one after the other. Each of the containers will place their child elements such that they fill out the available space available to the container itself. The layout mechanism does not allow precise control over the layout, unless one writes their own container objects, that its the developer cannot specify the exact location of a GUI element. This mechanism is simple to use and produces good results for most of the cases. Containers can be nested to an arbitrary depth and the following init arguments are available to allow further control over the layout:</p>

<ul>
 <li><code>min-width</code>, <code>min-height</code> are init arguments passed to GUI controls and  containers to specify a minimum width and height, if not specified, the  control will compute its minimum dimensions based on its contents.</li>
 <li><code>stretchable-width</code> and <code>stretchable-height</code> are init arguments supported by  GUI controls and containers which are used to indicate if the GUI control  can stretch in the respective direction when more space is available.</li>
 <li><code>border</code> is an init argument for containers, and specifies the number of  pixels to leave as as margin around its children GUI elements</li>
 <li><code>spacing</code> is an init argument for containers which specifies the minimum  space to leave between children GUI elements</li>
 <li><code>alignment</code> is an init argument for containers, used to specify how to align  children elements which cannot be stretched.</li></ul>

<p><strong>User input</strong> from the application is achieved through <strong>callbacks</strong>: each GUI control has a <code>callback</code> init argument which is invoked when the user interacts with the control. The exact time when a callback is invoked depends on the type of control: a button&rsquo;s callback is invoked when the button is pressed, a text fields callback is invoked when the user edits the contents of the field. When callbacks are invoked, regardless of the type of control, they always get passed two arguments: the control that generated the event and the actual event that triggered it. Most of the time, these arguments will not be used by the callback, but they are occasionally useful: for example, the callback for a <code>choice%</code> control can use its arguments to determine which element was actually selected, since this information is not passed to the callback. We will see an example of this usage later in this blog post.</p>

<p>The GUI controls are designed such that new classes can be derived from them to allow the developer to implement <strong>custom behavior</strong> for the application. Unfortunately, after spending some time developing GUI applications in Racket, I came to the conclusion that this is required for pretty much every time one tries to develop a useful application in Racket. Even the simple password generator application will make use of this feature, so it is best to be aware of it. The Racket GUI documentation explains which methods can be overridden for every GUI control to customize its behavior.</p>

<h2 id="building-the-application">Building the application</h2>

<p>To build the actual application, we need to place the experimental code in a Racket source file, so it can be saved and reused. The first things we define are the top-level window and the containers which will hold the GUI controls, they will allow us to control the layout of the GUI controls: the <code>frame%</code> object will place its child items, the <code>settings-panel</code>, <code>password-panel</code> and <code>bottom-pane</code>, one below the other, in the order in which they are created, making creation order important even though there is no direct dependencies between the child panels. The frame is created with a default width and height, but these are minimum values only, and the size of the frame will be calculated such that all items added to it will fit.</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="c1">;; Implementation defined later</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-toplevel-close</span> <span class="n">window</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/void.html#(def._((quote._~23~25kernel)._void))" style="color: inherit">void</a></span><span class="p">))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">toplevel</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/createclass.html#(form._((lib._racket/private/class-internal..rkt)._class))" style="color: inherit">class</a></span> <span class="n">frame%</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/createclass.html#(form._((lib._racket/private/class-internal..rkt)._init))" style="color: inherit">init</a></span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._super-new))" style="color: inherit">super-new</a></span><span class="p">)</span>
         <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/createclass.html#(form._((lib._racket/private/class-internal..rkt)._define/augment))" style="color: inherit">define/augment</a></span> <span class="p">(</span><span class="n">on-close</span><span class="p">)</span>
           <span class="p">(</span><span class="n">on-toplevel-close</span> <span class="k"><a href="http://docs.racket-lang.org/reference/createclass.html#(form._((lib._racket/private/class-internal..rkt)._this))" style="color: inherit">this</a></span><span class="p">)))</span>
       <span class="p">[</span><span class="n">label</span> <span class="s2">"Password Generator"</span><span class="p">]</span> <span class="p">[</span><span class="n">width</span> <span class="mi">600</span><span class="p">]</span> <span class="p">[</span><span class="n">height</span> <span class="mi">275</span><span class="p">]</span>
       <span class="p">[</span><span class="n">border</span> <span class="mi">15</span><span class="p">]))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">settings-panel</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">group-box-panel%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">toplevel</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Options"</span><span class="p">]</span>
       <span class="p">[</span><span class="n">border</span> <span class="mi">15</span><span class="p">]</span> <span class="p">[</span><span class="n">spacing</span> <span class="mi">20</span><span class="p">]</span> <span class="p">[</span><span class="n">alignment</span> <span class="o">'</span><span class="p">(</span><span class="ss">center</span> <span class="ss">center</span><span class="p">)]</span> <span class="p">[</span><span class="n">stretchable-height</span> <span class="no">#f</span><span class="p">]))</span>

<span class="c1">;; a group-box-panel% has vertical orientation by default, change to horizontal</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">settings-panel</span> <span class="n">set-orientation</span> <span class="no">#t</span><span class="p">)</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">password-panel</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">group-box-panel%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">toplevel</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Password"</span><span class="p">]</span>
       <span class="p">[</span><span class="n">border</span> <span class="mi">15</span><span class="p">]</span> <span class="p">[</span><span class="n">spacing</span> <span class="mi">20</span><span class="p">]</span> <span class="p">[</span><span class="n">stretchable-height</span> <span class="no">#f</span><span class="p">]))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">password-panel</span> <span class="n">set-orientation</span> <span class="no">#t</span><span class="p">)</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">bottom-pane</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">horizontal-pane%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">toplevel</span><span class="p">]</span> <span class="p">[</span><span class="n">border</span> <span class="mi">15</span><span class="p">]</span> <span class="p">[</span><span class="n">spacing</span> <span class="mi">20</span><span class="p">]))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">toplevel</span> <span class="n">show</span> <span class="no">#t</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>In the code above, we did not create a <code>frame%</code> object directly, instead an object derived from <code>frame%</code> is used: this overrides the <code>on-close</code> method to call an <code>on-toplevel-close</code> function, which is a function invoked when the application will close.</p>

<h3 id="gui-controls-in-the-settings-panel">GUI controls in the <code>settings-panel</code></h3>

<p>Next, we need to create the GUI controls which display information and interact with the user. The alphabet selection for the password is done using a <code>choice%</code> control, which will display a selection and a drop down menu allowing the user to select between several possibilities. The control has a <code>choices</code> init argument, which specifies the list of strings to display to the user and allows determining the current selection using the <code>get-selection</code> method, which returns a number. This interface is prone to subtle bugs, since it is difficult to keep the contents of the <code>choice%</code> control in sync with the data that the application needs to use. To avoid such problems, we define a &ldquo;data mapping&rdquo; of names to the actual data: the <code>password-alphabets</code> list maps an alphabet name to an actual alphabet, which were defined in the <a href="/2019/03/password-generator.html">previous blog post</a>. The <code>choices</code> init argument is initialized by extracting the names from <code>password-alphabets</code>, and each time we want to retrieve the actual alphabet, we can use the index returned by <code>get-selection</code>:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="c1">;; Implementation defined later</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-alphabet-choice</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/void.html#(def._((quote._~23~25kernel)._void))" style="color: inherit">void</a></span><span class="p">))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">password-alphabets</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list))" style="color: inherit">list</a></span>
   <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list))" style="color: inherit">list</a></span> <span class="s2">"Full"</span> <span class="n">full-alphabet</span><span class="p">)</span>
   <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list))" style="color: inherit">list</a></span> <span class="s2">"Normal"</span> <span class="n">normal-alphabet</span><span class="p">)</span>
   <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list))" style="color: inherit">list</a></span> <span class="s2">"Lower Case"</span> <span class="n">lower-case-alphabet</span><span class="p">)</span>
   <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list))" style="color: inherit">list</a></span> <span class="s2">"Simplified"</span> <span class="n">simplified-alphabet</span><span class="p">)))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">alphabet</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">choice%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">settings-panel</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Alphabet "</span><span class="p">]</span>
       <span class="p">[</span><span class="n">choices</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/private/map..rkt)._map))" style="color: inherit">map</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._first))" style="color: inherit">first</a></span> <span class="n">password-alphabets</span><span class="p">)]</span>
       <span class="p">[</span><span class="n">callback</span> <span class="n">on-alphabet-choice</span><span class="p">]))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The choice of password strength, the bit count for the random number, is defined in a similar way. Here we restrict selection to a predefined number of bits to keep things simple &mdash; we could have used a text field to allow the user to enter an arbitrary value, but this would have increased complexity, as we would have to validate the input.</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="c1">;; Implementation defined later</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-bit-count-choice</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/void.html#(def._((quote._~23~25kernel)._void))" style="color: inherit">void</a></span><span class="p">))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">password-bits</span>
  <span class="o">'</span><span class="p">((</span><span class="s2">"64 bits"</span> <span class="mi">64</span><span class="p">)</span>   <span class="p">(</span><span class="s2">"96 bits"</span> <span class="mi">96</span><span class="p">)</span>   <span class="p">(</span><span class="s2">"128 bits"</span> <span class="mi">128</span><span class="p">)</span>
    <span class="p">(</span><span class="s2">"256 bits"</span> <span class="mi">256</span><span class="p">)</span> <span class="p">(</span><span class="s2">"512 bits"</span> <span class="mi">512</span><span class="p">)</span> <span class="p">(</span><span class="s2">"1024 bits"</span> <span class="mi">1024</span><span class="p">)))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">bit-count</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">choice%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">settings-panel</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Strength "</span><span class="p">]</span>
       <span class="p">[</span><span class="n">choices</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/private/map..rkt)._map))" style="color: inherit">map</a></span> <span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._first))" style="color: inherit">first</a></span> <span class="n">password-bits</span><span class="p">)]</span>
       <span class="p">[</span><span class="n">callback</span> <span class="n">on-bit-count-choice</span><span class="p">]))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The &ldquo;group letters&rdquo; option is a simple check box, since the only two possible values are &ldquo;on&rdquo; or &ldquo;off&rdquo;:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="c1">;; Implementation defined later</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-group-letters</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/void.html#(def._((quote._~23~25kernel)._void))" style="color: inherit">void</a></span><span class="p">))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">group</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">check-box%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">settings-panel</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Group letters"</span><span class="p">]</span>
       <span class="p">[</span><span class="n">callback</span> <span class="n">on-group-letters</span><span class="p">]))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h3 id="gui-controls-in-the-password-panel">GUI controls in the <code>password-panel</code></h3>

<p>The password will be shown to the user in a <code>text-field%</code> with a larger font. The <code>text-field%</code> was chosen because it allows the user to select the contents of the field to copy it to the clipboard (a <code>message%</code> would not have worked for this purpose), but this has the disadvantage that the user can change the password by typing into the field, but since this is his or her password, this is not a big problem:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">font</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">the-font-list</span> <span class="n">find-or-create-font</span> <span class="mi">16</span> <span class="o">'</span><span class="ss">modern</span> <span class="o">'</span><span class="ss">normal</span> <span class="o">'</span><span class="ss">normal</span><span class="p">))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">password</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">text-field%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">password-panel</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="no">#f</span><span class="p">]</span> <span class="p">[</span><span class="n">init-value</span> <span class="s2">""</span><span class="p">]</span> <span class="p">[</span><span class="n">font</span> <span class="n">font</span><span class="p">]))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Next to the password field, we add a button to copy the contents to the clipboard. Since this functionality does not depend on the other controls, we can implement the callback directly: when the button is clicked, the contents of the <code>password</code> field are retrieved and placed in the clipboard using <code>set-clipboard-string</code>:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-copy-to-clipboard</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">pw</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">password</span> <span class="n">get-value</span><span class="p">))</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">the-clipboard</span> <span class="n">set-clipboard-string</span> <span class="n">pw</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/time.html#(def._((quote._~23~25kernel)._current-milliseconds))" style="color: inherit">current-milliseconds</a></span><span class="p">)))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">copy</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">button%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">password-panel</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Copy"</span><span class="p">]</span>
       <span class="p">[</span><span class="n">callback</span> <span class="n">on-copy-to-clipboard</span><span class="p">]))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h3 id="gui-controls-in-the-bottom-pane">GUI controls in the <code>bottom-pane</code></h3>

<p>The bottom part of the window contains two buttons: a &ldquo;New Password&rdquo; button can be used to generate a new password and a &ldquo;Close&rdquo; button to close the application. The buttons are defined just like the &ldquo;Copy&rdquo; button above, but there&rsquo;s an additional invisible <code>message%</code> GUI control, its purpose is to force the <code>bottom-pane</code> to align the two buttons to the right: since the invisible message is defined as stretchable (<code>stretchable-width</code> is <code>#t</code>), it will take up all the available space in the panel, while the two buttons will only occupy the minimum space they need, since buttons are created as non-stretchable by default. This is an example of a layout technique that can be used and it might be useful to experiment with removing this GUI control and changing the <code>stretchable-width</code> for the other GUI control, to better understand how to control the layout of the GUI controls:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">invisible</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">message%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">bottom-pane</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">""</span><span class="p">]</span> <span class="p">[</span><span class="n">stretchable-width</span> <span class="no">#t</span><span class="p">]))</span>

<span class="c1">;; Implementation defined later</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-new-password</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/void.html#(def._((quote._~23~25kernel)._void))" style="color: inherit">void</a></span><span class="p">)</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">new-password</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">button%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">bottom-pane</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"New Password"</span><span class="p">]</span>
       <span class="p">[</span><span class="n">callback</span> <span class="n">on-new-password</span><span class="p">]))</span>

<span class="c1">;; Implementation defined later</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-close-form</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/void.html#(def._((quote._~23~25kernel)._void))" style="color: inherit">void</a></span><span class="p">))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">close</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._new))" style="color: inherit">new</a></span> <span class="n">button%</span> <span class="p">[</span><span class="n">parent</span> <span class="n">bottom-pane</span><span class="p">]</span> <span class="p">[</span><span class="n">label</span> <span class="s2">"Close"</span><span class="p">]</span>
       <span class="p">[</span><span class="n">callback</span> <span class="n">on-close-form</span><span class="p">]))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h3 id="handling-user-input-and-generating-the-password">Handling user input and generating the password</h3>

<p>If you run the application as it is now, you&rsquo;ll notice that the GUI shows up correctly, but there is no response from the application when the user selects the various options &mdash; this is because all the callback we defined are empty.</p>

<p>This application does only one thing: it generates a password based on the currently selected password options, and this can be implemented as a single function, <code>refresh-password</code> which queries the state of the <code>alphabet</code>, <code>bit-count</code> and <code>group</code> GUI controls and calls <code>random-bignum</code> and <code>encode-bignum</code>, which were defined in the <a href="/2019/03/password-generator.html">previous blog post</a>.</p>

<p>To make things more interesting, the password generation is split into two parts: when the user selects a new bit count for the password strength, a new password will be generated, but when the user just changes the alphabet or grouping, the same key is encoded according to the new selection. This is achieved by keeping the <code>key</code> a global value and making <code>refresh-password</code> reusing it by default and only generating a new key when <code>key</code> is <code>#f</code></p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">key</span> <span class="no">#f</span><span class="p">)</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">refresh-password</span><span class="p">)</span>
  <span class="c1">;; Generate a key if we don&#39;t have one</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/when_unless.html#(form._((lib._racket/private/letstx-scheme..rkt)._unless))" style="color: inherit">unless</a></span> <span class="n">key</span>
    <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">index</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">bit-count</span> <span class="n">get-selection</span><span class="p">))</span>
    <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">bits</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._second))" style="color: inherit">second</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list-ref))" style="color: inherit">list-ref</a></span> <span class="n">password-bits</span> <span class="n">index</span><span class="p">)))</span>
    <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" style="color: inherit">set!</a></span> <span class="n">key</span> <span class="p">(</span><span class="n">random-bignum</span> <span class="n">bits</span><span class="p">)))</span>
  <span class="c1">;; Encode the password based on the alphabet and group settings</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">a</span>
    <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" style="color: inherit">let</a></span> <span class="p">((</span><span class="n">index</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">alphabet</span> <span class="n">get-selection</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._second))" style="color: inherit">second</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list-ref))" style="color: inherit">list-ref</a></span> <span class="n">password-alphabets</span> <span class="n">index</span><span class="p">))))</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">group?</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">group</span> <span class="n">get-value</span><span class="p">))</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">encoded-key</span> <span class="p">(</span><span class="n">encode-bignum</span> <span class="n">key</span> <span class="n">a</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/if.html#(form._((quote._~23~25kernel)._if))" style="color: inherit">if</a></span> <span class="n">group?</span> <span class="mi">4</span> <span class="mi">0</span><span class="p">)</span> <span class="sc">#\-</span><span class="p">))</span>
  <span class="c1">;; Set the contents of the `password-field` to password</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">password</span> <span class="n">set-value</span> <span class="n">encoded-key</span><span class="p">)</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">password</span> <span class="n">focus</span><span class="p">))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>With this, all the callback for the <code>alphabet</code>, <code>bit-count</code>, <code>group</code> and <code>new-password</code> can be updated to just call <code>refresh-password</code>. The callbacks for the <code>bit-count</code> and <code>new-password</code> will also clear the key:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-alphabet-choice</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span>
  <span class="p">(</span><span class="n">refresh-password</span><span class="p">))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-bit-count-choice</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" style="color: inherit">set!</a></span> <span class="n">key</span> <span class="no">#f</span><span class="p">)</span>
  <span class="p">(</span><span class="n">refresh-password</span><span class="p">))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-group-letters</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span>
  <span class="p">(</span><span class="n">refresh-password</span><span class="p">))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-new-password</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" style="color: inherit">set!</a></span> <span class="n">key</span> <span class="no">#f</span><span class="p">)</span>
  <span class="p">(</span><span class="n">refresh-password</span><span class="p">))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h3 id="saving-and-restoring-the-application-state">Saving and restoring the application state</h3>

<p>When the GUI controls are created, they will always default to an initial state: a <code>choice%</code> will show its first item selected and a <code>check-box%</code> will be unchecked, unless a value is specified when it is created. A user might expect to see their last selection when they start the application again, this way, for example, if they always want to use the &ldquo;Lower Case&rdquo; alphabet, they can change it once, and the setting will be remembered when the application starts up again.</p>

<p>This functionality needs to be implemented in two parts: when the application is closed, the current state is saved and when the application is started the last saved state (if any) is restored. Racket provides two functions <code><a href="http://docs.racket-lang.org/reference/Filesystem.html#(def._((lib._racket/file..rkt)._get-preference))" style="color: inherit">get-preference</a></code> and <code><a href="http://docs.racket-lang.org/reference/Filesystem.html#(def._((lib._racket/file..rkt)._put-preferences))" style="color: inherit">put-preferences</a></code> that can be used to store and retrieve preferences and we&rsquo;ll use these.</p>

<p>The toplevel <code>frame%</code> was created to call <code>on-toplevel-close</code> when the user closes the window. This function will retrieve the current state from the relevant GUI controls and save this using <code><a href="http://docs.racket-lang.org/reference/Filesystem.html#(def._((lib._racket/file..rkt)._put-preferences))" style="color: inherit">put-preferences</a></code>. The callback for the <code>close</code> button will also invoke <code>on-toplevel-close</code>. When saving the state it is tempting to save the simplest thing: in our case the index in the choice controls, but the index can change if the choices are re-ordered or elements are added or removed. This code will save the actual alphabet name or bit count value, which have better chance of surviving an application refactoring.</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-toplevel-close</span> <span class="n">frame</span><span class="p">)</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">alphabet-name</span>
    <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" style="color: inherit">let</a></span> <span class="p">((</span><span class="n">index</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">alphabet</span> <span class="n">get-selection</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._first))" style="color: inherit">first</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list-ref))" style="color: inherit">list-ref</a></span> <span class="n">password-alphabets</span> <span class="n">index</span><span class="p">))))</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">bits-name</span>
    <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" style="color: inherit">let</a></span> <span class="p">([</span><span class="n">index</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">bit-count</span> <span class="n">get-selection</span><span class="p">)])</span>
      <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._first))" style="color: inherit">first</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list-ref))" style="color: inherit">list-ref</a></span> <span class="n">password-bits</span> <span class="n">index</span><span class="p">))))</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="n">group?</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">group</span> <span class="n">get-value</span><span class="p">))</span>
  <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/Filesystem.html#(def._((lib._racket/file..rkt)._put-preferences))" style="color: inherit">put-preferences</a></span>
   <span class="o">'</span><span class="p">(</span><span class="ss">ah-password-generator:alphabet</span>
     <span class="ss">ah-password-generator:bit-count</span>
     <span class="ss">ah-password-generator:group?</span><span class="p">)</span>
   <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._list))" style="color: inherit">list</a></span> <span class="n">alphabet-name</span> <span class="n">bits-name</span> <span class="n">group?</span><span class="p">))</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">frame</span> <span class="n">show</span> <span class="no">#f</span><span class="p">))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/define.html#(form._((lib._racket/private/base..rkt)._define))" style="color: inherit">define</a></span> <span class="p">(</span><span class="n">on-close-form</span> <span class="n">control</span> <span class="n">event</span><span class="p">)</span>
  <span class="p">(</span><span class="n">on-toplevel-close</span> <span class="n">toplevel</span><span class="p">))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Than, when the application starts, the settings are retrieved using <code><a href="http://docs.racket-lang.org/reference/Filesystem.html#(def._((lib._racket/file..rkt)._get-preference))" style="color: inherit">get-preference</a></code> and the code has multiple levels of error checking: First, if <code>get-preference</code> does not find a value, it returns a suitable default &mdash; this will happen when the user runs the application for the first time. Next, the <code><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._index-where))" style="color: inherit">index-where</a></code> might not find the stored value, so the code will select the first item instead. It is always a good idea to check the values retrieved from outside the application, even if these values were saved by the application at an earlier time: the application might have been updated between the time it saved the values and reading them:</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let*))" style="color: inherit">let*</a></span> <span class="p">((</span><span class="n">previous-choice</span>
        <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/Filesystem.html#(def._((lib._racket/file..rkt)._get-preference))" style="color: inherit">get-preference</a></span> <span class="o">'</span><span class="ss">ah-password-generator:alphabet</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" style="color: inherit">lambda</a></span> <span class="p">()</span> <span class="s2">"Lower Case"</span><span class="p">)))</span>
       <span class="p">(</span><span class="n">index</span> <span class="p">(</span><span class="n"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._index-where))" style="color: inherit">index-where</a></span> <span class="n">password-alphabets</span>
                           <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" style="color: inherit">lambda</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" style="color: inherit">equal?</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._first))" style="color: inherit">first</a></span> <span class="n">x</span><span class="p">)</span> <span class="n">previous-choice</span><span class="p">)))))</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">alphabet</span> <span class="n">set-selection</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" style="color: inherit">or</a></span> <span class="n">index</span> <span class="mi">0</span><span class="p">)))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let*))" style="color: inherit">let*</a></span> <span class="p">((</span><span class="n">previous-choice</span>
        <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/Filesystem.html#(def._((lib._racket/file..rkt)._get-preference))" style="color: inherit">get-preference</a></span> <span class="o">'</span><span class="ss">ah-password-generator:bit-count</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" style="color: inherit">lambda</a></span> <span class="p">()</span> <span class="s2">"96 bits"</span><span class="p">)))</span>
       <span class="p">(</span><span class="n">index</span> <span class="p">(</span><span class="n"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._index-where))" style="color: inherit">index-where</a></span> <span class="n">password-bits</span>
                           <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" style="color: inherit">lambda</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" style="color: inherit">equal?</a></span> <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket/list..rkt)._first))" style="color: inherit">first</a></span> <span class="n">x</span><span class="p">)</span> <span class="n">previous-choice</span><span class="p">)))))</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">bit-count</span> <span class="n">set-selection</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" style="color: inherit">or</a></span> <span class="n">index</span> <span class="mi">0</span><span class="p">)))</span>

<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" style="color: inherit">let</a></span> <span class="p">((</span><span class="n">previous-choice</span>
       <span class="p">(</span><span class="nb"><a href="http://docs.racket-lang.org/reference/Filesystem.html#(def._((lib._racket/file..rkt)._get-preference))" style="color: inherit">get-preference</a></span> <span class="o">'</span><span class="ss">ah-password-generator:group?</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" style="color: inherit">lambda</a></span> <span class="p">()</span> <span class="no">#f</span><span class="p">))))</span>
  <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">group</span> <span class="n">set-value</span> <span class="n">previous-choice</span><span class="p">))</span>

<span class="p">(</span><span class="n">refresh-password</span><span class="p">)</span>
<span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" style="color: inherit">send</a></span> <span class="n">toplevel</span> <span class="n">show</span> <span class="no">#t</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="building-a-stand-alone-executable">Building a stand-alone executable</h2>

<p>You can run this application directly from DrRacket, but this is not very practical for a user, however Racket allows building standalone executables, which is very convenient for us. Executables can be built for Linux, Windows and MacOS, and with similar command line arguments, but the example below shows how build an executable on Windows. Since this is a GUI application, it will need an icon, otherwise Racket will use the default Racket icon for it. As an example, I choose a <a href="http://www.iconarchive.com/show/papirus-apps-icons-by-papirus-team/preferences-desktop-user-password-icon.html">padlock icon</a> from IconArchive and downloaded the ICO version for Windows. To create the executable, you will need to run the &ldquo;raco&rdquo; command below:</p>

<pre><code>raco exe --gui --embed-dlls --ico pwgen-gui.ico -o PasswordGenerator.exe pwgen-gui.rkt </code></pre>

<p>Normally, an executable produced this way will depend on other racket libraries and files, and we would need a &ldquo;raco distribute&rdquo; command to create a stand-alone distribution. However, the <code>--embed-dlls</code> option tells raco to put all dependent DLLs in the executable, so it can run without any other supporting files.</p>

<h2 id="source-code">Source code</h2>

<p>The entire application in available in this <a href="https://gist.github.com/alex-hhh/6acbbb8ebca47c4cfaa2540499494af6">Github Gist</a> and you can download the icon from <a href="http://www.iconarchive.com/show/papirus-apps-icons-by-papirus-team/preferences-desktop-user-password-icon.html">here</a>.</p>
  <footer>
    <div class="row justify-content-center">
      <nav aria-label="Page Navigation">
        <ul class="pagination">
          <li class="page-item">
            <a class="page-link" href="/2019/03/password-generator.html"
               aria-label="Previous">
              <span aria-hidden="true">&larr; Writing a Simple Password Generator in Racket</span>
            </a>
          </li>
          <li class="page-item">
            <a class="page-link" href="/2019/04/build-racket-packages-with-azure-pipelines.html"
               aria-label="Next">
              <span aria-hidden="true">Build Racket Packages with Azure Pipelines &rarr;</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.identifier = undefined;
        this.page.url = undefined;
        this.page.title = undefined;
        this.page.category_id = undefined;
      };
      var disqus_shortname = 'alex-hhh-github-com';
      (function() {
          var dsq = document.createElement('script');
          dsq.type = 'text/javascript';
          dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          dsq.setAttribute('data-timestamp', +new Date());
          (document.head || document.body).appendChild(dsq);
      })();
    </script>
    <noscript>
      Please enable JavaScript to view the
      <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
  </footer>
</article>
        </div>
        <div id="sidebar-content" class="col-md-3">
          <!-- will be filled in dynamically by custom.js -->
        </div>
      </div>
      <footer>
        <hr />
        <div class="fine-print">© Alex Harsányi, licensed under
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
          , and there's a <a href="/Cookies.html">cookie policy</a>.
        </div>
      </footer>
    </div>
    <!-- </body> JS -->
  <!-- NOTE: jQuery must be loaded first -->
  <script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
  <script type="text/javascript" src="/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript" src="/js/custom.js"></script>
  </body>
</html>